---
title: 'EEB603 -- Chapter 10: Visualizing Results with Figures'
author: "Paige Ellestad, Molly Levy, Haley Netherton-Morrison"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: yes
    df_print: paged
  pdf_document:
    toc: yes
urlcolor: blue
link-citations: yes
fontsize: 12pt
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r packages, echo=FALSE, warning=FALSE, include=FALSE}
#everyone can add in the packages that they will need. 
library(ape)
library(ggplot2)
library(readr)

#Generate BibTex citation file for all R packages used to produce report
knitr::write_bib(.packages(), file = 'packages.bib')
```

# Introduction

## Aim, learning outcomes, associated files, depedencies, etc. 

## Data structure

## Review of inserting Figures (Ch1 bookdown tutorial)

```{r ReproWorkflow, echo=FALSE, fig.align="center", fig.cap="random photo", out.width = '100%'}
knitr::include_graphics("random_photo.jpg")
```

#(Haley) Making Figures with Default Graphics and ggplot2

## Chunk Options for Figures

## Refresher: Plots with R's Default Graphics

## Using ggplot2
```{r}
#load data
GoodDogs <- read_csv("Chapter_10/Data/GoodDogs.csv")
View(GoodDogs)

#create scatterplot
ggplot(GoodDogs, aes(x=Age, y=Rating)) + geom_point()

#create bar chart of average rating by dog breed

```

### Customization with ggplot2
- Customization
  - Titles and Legend Styling
  - Box plots and histograms example
  - Additional Options
    - Arranging multiple plots
    - Colors
    
## Exercise 1: Producing a figure like this

## Execise 2: Producing and arranging two figures like this




# Exercise 2: Networks

## What is a network?

## Network terminology

In network analyses, "nodes" designate the vertices of a network whereas "edges" indicate the ties between nodes. 

## Visualizing a network diagram in R

To continue to advance our understanding of ggplot2, we will be using the ggnet2 function, which is a visualization function used to ploet   network objects as ggplot2 objects. For users who are amiliar with the ggplot 2 package, the ggnet2 function uses a synta that comes close to the "grammar of graphics" to process and plot network data, in teh same format as was used for network analysis. ggnet2 is available through the GGally package

```{r}
#install packages
install.packages("GGally")
library(GGally)

#install dependencies
library(network)
library(sna)
library(ggplot2)
library(RColorBrewer)
```

## Let's create a basic network!

For the purpose of this tutorial, we are going to create an undirected basic network, with 10 nodes named "a, b, ..., i, j" and a high likelihood of an edge to eist between them:

```{r}
# random graph
net = rgraph(10, mode = "graph", tprob = 0.5)
net = network(net, directed = FALSE)

#vertex names
network.vertex.names(net) = letters[1:10]

#visualize the network
ggnet2(net)
```

The net argument is the only compulsory argument of ggnet2. It can be a network object or any object that can be coerced to that class through its edgeset.constructors functions, such as adjacency matrixes, incidence matrixes and edge lists.

## Let's start to modify our network!

The most basic properties of our network that we might want to change are the size/color of the nodes and/or the size/color of the edges. Let's practice modifyin each of these properties...

```{r}
# editing node and edge properties
ggnet2 (net, node.size = 6, node.color = "black", edge.size = 1, edge.color = "grey")
```

Note that the verte-related arguments of ggnet2 start with node, and the edge-related arguments start with edge. We can also abbreviate the node.color and node.size arguments to save time!

```{r}
ggnet2(net, size = 6, color = "black", edge.size = 1, edge.color = "grey")
```

Using these basic methods, we can set the color, size, shape, and even transparency of the nodes. Let's next consider how we might modify the POSITION of the nodes

## Node placement

BY default, ggnet2 places nodes using something called the Fruchter-Reingold force-directed algorithm. However, there are other algorithms we might want to use instead. There is no single, "good" layout algorithm, and different approaches may be valuable under different circumstances.For more information, you can see the documentation of the gplot.layout function for the lsit of placement algorithms. Let's test out a few different common algorithms. How do these networks differ from one another?

```{r}
# algorithms of node placement
ggnet2(net)
ggnet2(net, mode = "circle")
ggnet2(net, mode = "kamadakawai")
ggnet2(net, mode = "random")
```

As noted, the default is Fruchterman-Reingold. This function generates a layout using a variant of Frucherterman and Reingold's force-directed placement algorithm. The circle algorithm places vertices uniformly in a circle and can't be modified by any additional arguments. The kamadakawai funciton generates a verte layout using a version of the Kamada-Kawi force-directed placement algorithm. As one might epect, the  random funciton places vertices randomly - you can re-run this line of code repeatedly and see all the different node arrangements that are randomly generated! 

## Advanced node colors

We have already considered how to do a basic modification of node colors. Let's now assign a verte attribute "phono", which indicates whether the name of the vertex is a vowel or consonant. This attribute can be passed to ggnet2 to indicate that the nods belong to a group. We will pass the name of the verte attribute to the color argument, which will then use it to map the colors of the nodes.

```{r}
# indicating vowel or consonant
net %v% "phono" = ifelse(letters[1:10] %in% c("a", "e", "i"), "vowel", "consonant")

# map node color based on vertex attribute
ggnet2(net, color = "phono")
```




#(Paige) Exercise 3: Introduction to phylogenies

# Resources

- Chapter 10 of Gandrund(2015)
- Chapter 1 of Wickham and Grolemund (2017)
- Chapter 22 of Guangchuang et al. (2017)

# References

<div id="refs"></div>

# (APPENDIX) Appendix {-}

# Appendix 1

Citations of all R packages used to generate this report. 

```{r generateBibliography, results="asis", echo=TRUE, warning = FALSE, message=FALSE}
library("knitcitations")
cleanbib()
options("citation_format" = "pandoc")
read.bibtex(file = "packages.bib")
``` 

# Appendix 2

Version information about R, the operating system (OS) and attached or R loaded packages. This appendix was generated using `sessionInfo()`.

```{r eval=T, echo=F, warning = FALSE, message=FALSE}
sessionInfo()
```

